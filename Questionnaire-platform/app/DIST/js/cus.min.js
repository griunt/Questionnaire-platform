define("util",[],function(){function e(t){if(null==t||"object"!=typeof t)return t;if(t instanceof Date){var n=new Date(t.getData());return n}if(t instanceof Array){for(var n=new Array,a=0,r=t.length;r>a;a++)n[a]=t[a];return n}if(t instanceof Object){var n=new Object;for(var o in t)t.hasOwnProperty(o)&&(n[o]=e(t[o]));return n}}function t(e,t,n){s.addHandler(e,t,n)}function n(e,t,n){s.removeHandler(e,t,n)}function a(e,t){s.addHandler(e,"click",t)}function r(e,t){e.onkeydown=function(e){e=s.getEvent(e),13===e.keyCode&&t()}}function o(e,t,n,a){s.addHandler(e,n,function(e){var r=(s.getEvent(e),s.getTarget(e)),o=r.nodeName.toLowerCase();o===t&&s.addHandler(r,n,a)})}function i(e,t,n){for(var a=[],r=[],o=0;o<t.length;o++)t[o][e]===n&&(a.push(t[o]),r.push(o));return{objectIneed:a,position:r}}function c(e){for(var t=e.length,n=t-2;n>0;n--)for(var a=e[n].id,r=n+1;r<e.length;r++)a===e[r].id&&e.splice(r,1);return e}function d(){var e=document.getElementsByTagName("header")[0],n=e.getElementsByTagName("h3")[0],a=e.getElementsByTagName("h4")[0];t(n,"click",function(){window.location.hash="#listpage"}),t(a,"click",function(){window.location.hash="#listpage"})}var l=function(e){for(var t=function(e){return e.getElementsByTagName("*")},n=document.getElementsByTagName("html")[0],a=e.replace(/\s+/," ").split(" "),r=0,o=a.length;o>r;r++){n=t(n);var i=n.length,c=!1;switch(a[r][0]){case"#":for(var d=0;i>d;d++)if(n[d].id===a[r].substring(1)){n=n[d],c=!0;break}break;case"*":for(var l=[],d=0;i>d;d++){var s=n[d].className.split(" ");if(-1!==s.indexOf(a[r].substring(1))&&l.push(n[d]),d===i&&l!==[]){n=l,c=!0;break}}break;case".":for(var d=0;i>d;d++){var s=n[d].className.split(" ");if(-1!==s.indexOf(a[r].substring(1))){n=n[d],c=!0;break}}break;case"[":var u=a[r].indexOf("=");if(-1!==u){for(var f=a[r].substring(1,u),g=a[r].substring(u+1,a[r].length-1),d=0;i>d;d++)if(n[d][f]===g){n=n[d],c=!0;break}}else for(var f=a[r].substring(1,a[r].length-1),d=0;i>d;d++)if(n[d][f]){n=n[d],c=!0;break}break;default:for(var d=0;i>d;d++)if(n[d].tagName===a[r].toUpperCase()){n=n[d],c=!0;break}}}return c||(n=null),n},s={addHandler:function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n},removeHandler:function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent?e.detachEvent(t,n,!1):e["on"+t]=null},getEvent:function(e){return e?e:window.event},getTarget:function(e){return e.target||e.srcElement},preventDefault:function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}};l.on=t,l.un=n,l.click=a,l.enter=r,l.delegate=o,l.EventUtil=s,l.cloneObject=e,l.findObjectBy=i,l.unique=c,l.returnToListPage=d;var u;l.pos=u;var f=!1;return l.iAmNew=f,{U:l}}),define("storage",[],function(){function e(){var e=arguments[0].qn,t=arguments[0].textarea,n=arguments[0].checkbox,a=arguments[0].radio;"not change"!==e&&(localStorage.qn=JSON.stringify(e)),"not change"!==t&&(localStorage.textarea=JSON.stringify(t)),"not change"!==n&&(localStorage.checkbox=JSON.stringify(n)),"not change"!==a&&(localStorage.radio=JSON.stringify(a))}function t(){var e,t,a,r;return localStorage.qn||(localStorage.qn=n.qn,localStorage.checkbox=n.checkbox,localStorage.textarea=n.textarea,localStorage.radio=n.radio),a=JSON.parse(localStorage.checkbox),t=JSON.parse(localStorage.textarea),r=JSON.parse(localStorage.radio),e=JSON.parse(localStorage.qn),{qn:e,checkbox:a,textarea:t,radio:r}}var n={qn:'[{"id" : 1,"title" : "第一份问卷","endTime" : "2016-4-30","textarea" : [1],"checkbox" : [1],"radio" : [1],"status" : "发布中"},{"id" : 2,"title" : "第二份问卷","endTime" : "2016-4-20","textarea" : [2],"checkbox" : [2],"radio" : [2],"status" : "已结束"},{"id": 3,"title": "第三份问卷","endTime": "2016-5-20","textarea" : [3],"checkbox" : [3],"radio" : [3],"status" : "未开始"}]',textarea:'[{"id" : 1,"title" : "文本框一","father" : 1,"order" : 3,"necessary" : true,"type": "textarea"},{"id" : 2,"title" : "文本框二","father" : 2,"order" : 3,"necessary" : true,"type": "textarea"},{"id" : 3,"title" : "文本框三","father" : 3,"order" : 3,"necessary" : true,"type": "textarea"}]',checkbox:'[{"id" : 1,"title" : "多选题一","father" : 1,"options" : ["选项一", "选项二", "选项三"],"necessary" : true,"order" : 2,"type": "checkbox"},{"id" : 2,"title" : "多选题二","father" : 2,"options" : ["选项一", "选项二", "选项三"],"necessary" : true,"order" : 2,"type": "checkbox"},{"id" : 3,"title" : "多选题三","father" : 3,"options" : ["选项一", "选项二", "选项三"],"necessary" : true,"order" : 2,"type": "checkbox"}]',radio:'[{"id" : 1,"title" : "单选题一","father" : 1,"options" : ["选项一", "选项二", "选项三"],"necessary" : true,"order" : 1,"type": "radio"},{"id" : 2,"title" : "单选题二","father" : 2,"options" : ["选项一", "选项二", "选项三"],"necessary" : true,"order" : 1,"type": "radio"},{"id" : 3,"title" : "单选题三","father" : 3,"options" : ["选项一", "选项二", "选项三"],"necessary" : true,"order" : 1,"type": "radio"}]'};return{save:e,getData:t}}),require(["util","storage"],function(e,t){var n=function(){navigator.userAgent.match(/(iPhone|iPod|Android|ios|iPad)/i)&&!/mobile/.test(location.href)&&(location.href="mobile.html")},a=function(){window.opener.postMessage("ready","http://harveyprofile.tk"),window.addEventListener("message",function(e){console.log(e.data),r(e.data)},!1),window.addEventListener("unload",function(e){e.currentTarget.opener.postMessage("closed","http://harveyprofile.tk")},!1),setTimeout(function(){navigator.userAgent.match(/(iPhone|iPod|Android|ios|iPad)/i)&&r(localStorage.pos)},100)},r=function(n){for(var a=document.getElementById("main"),r=t.getData().qn[n],c=i(r),d="",l=0,s=c.length;s>l;l++)d+=o(c[l]);d='<div id="new-build-qn"><div id="new-build-qn-head"><h3>'+r.title+'</h3></div><div id="new-build-content">'+d+'</div><div id="new-build-result-foot"><button>提交</button></div></div>',a.innerHTML=d;var u=document.getElementsByTagName("button")[0],f=document.getElementsByTagName("header")[0],g=f.getElementsByTagName("h3")[0],h=f.getElementsByTagName("h4")[0];e.U.click(u,function(){location.href="../index.html"}),e.U.click(g,function(){location.href="../index.html"}),e.U.click(h,function(){location.href="../index.html"})},o=function(e){console.log(e.type);var t="",n="";n=e.necessary?"*":"";var a="";if("checkbox"===e.type){for(var r=0,o=e.options.length;o>r;r++)a+='<label for=""><input type="checkbox">'+e.options[r]+"</label>";t="<h4>Q"+e.order+" "+e.title+"（多选题）"+n+"</h4>"+a}else if("radio"===e.type){for(var i=0,c=e.options.length;c>i;i++)a+='<label for=""><input type="radio" name="'+e.order+'">'+e.options[i]+"</label>";t="<h4>Q"+e.order+" "+e.title+"（单选题）"+n+"</h4>"+a}else t="<h4>Q"+e.order+" "+e.title+"（文本题）"+n+"</h4><textarea></textarea>";return t="<div>"+t+"</div>"},i=function(n){var a=[];if(n.textarea!==[])for(var r=0,o=n.textarea.length;o>r;r++)a.push(e.U.findObjectBy("id",t.getData().textarea,n.textarea[r]).objectIneed[0]);if(n.checkbox!==[])for(var i=0,c=n.checkbox.length;c>i;i++)a.push(e.U.findObjectBy("id",t.getData().checkbox,n.checkbox[i]).objectIneed[0]);if(n.radio!==[])for(var d=0,l=n.radio.length;l>d;d++)a.push(e.U.findObjectBy("id",t.getData().radio,n.radio[d]).objectIneed[0]);return a.sort(function(e,t){return e.order<t.order?-1:1}),a};n(),a()}),define("customer",function(){});